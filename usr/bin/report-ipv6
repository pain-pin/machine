#!/usr/bin/bash

if [ "$#" -lt 1 ] || [ "$#" -gt 3 ]; then
    echo "Usage: $0 arg1 [arg2] [arg3]"
    exit 1
fi
#!/bin/bash

IP="$1"
DIR="${2:-${IP}_report}"

mkdir -p "$DIR"

run() {
    CMD="$1"
    OUT="$DIR/${CMD}.${IP}.out"
    echo "== $CMD ==" | tee "$OUT"
    eval "$CMD" 2>&1 | tee -a "$OUT"
}

#run "dig AAAA $IP"
#
#run "dig -x $IP"
#run "host $IP"

run "curl -s https://ipinfo.io/$IP"
run "curl -s https://ipapi.co/$IP/json/"

#run "sipcalc $IP"
#run "ipv6calc --in ipv6addr $IP"
#
#run "traceroute6 $IP"
#run "tracepath6 $IP"

run "curl -s https://api.bgpview.io/ip/$IP"
run "curl -s 'https://stat.ripe.net/data/prefix-overview/data.json?resource=$IP'"

run "nmap -6 $IP"


exit 0

