/*! cpshop - 2.1.14 (c) United Internet, 2025 */(()=>{"use strict";function e(){this.getServletContext=function(){const e=document.querySelector('meta[name="scontext"]'),t=e&&e.getAttribute("content");return null===t?"":t},this.getAllCrossSellCheckBoxes=function(){return document.querySelectorAll(".cross-sell-check")},this.getFormButton=function(){return document.querySelector("#product-form-button")},this.getCrossSellIdentifierFrom=function(e){return e?e.getAttribute("data-cross-sell-article"):null},this.getSelectedCrossSellsDiv=function(){return document.getElementById("selected-cross-sells")},this.getSelectedCrossSellsInputBy=function(e){return document.querySelector('input[data-cross-sell-name="'+e+'"]')},this.getSectionParentOfCheckbox=function(e){return this.findMatchingParent(e,"section.cross-sell-item")},this.getLicenseRadioElementsIfPresent=function(){return document.querySelectorAll('input[type="radio"][name="selectedVariant"]')},this.getLicenseDropDownElementIfPresent=function(){return document.querySelector('select[name="selectedVariant"]')},this.getSelectedProductLicenseInput=function(){return document.getElementById("selectedProductLicense")},this.findMatchingParent=function(e,t){if(!e)return null;Element.prototype.matches||(Element.prototype.matches=function(e){const t=(this.document||this.ownerDocument).querySelectorAll(e);let n=t.length;for(;--n>=0&&t.item(n)!==this;);return n>-1});let n=e;for(;n&&n!==document;n=n.parentNode)if(n.matches(t))return n;return null}}function t(){const t=new e,n=function(e,t){return e.classList.contains(t)},o=function(e,t){if(!t)return;const o=e.parentNode.querySelectorAll("li.variant");for(let e=0;e<o.length;e++){const r=o[e];n(r,t)?r.style.display="block":r.style.display="none"}},r=function(e,t){if(!t)return;const o=document.getElementById("tkginfos");if(!o)return;const r=e.parentNode.querySelector(e.tagName+":not([value='_base_']");if(!r)return;const s=o.querySelector("."+r.value);if(!s)return;const c=s.parentNode.querySelectorAll("span.variant");for(let e=0;e<c.length;e++){const o=c[e];n(o,t)?o.style.display="inline":o.style.display="none"}};return{setSelected:function(e){if(!e)return;const n=function(e,t){for(let n=0;n<e.length;n++){const o=e[n];if(o.getAttribute("value")===t)return o.checked=!0,void(o.selected=!0)}},s=t.getLicenseRadioElementsIfPresent();if(s&&s.length>0)return o(s[0],e),r(s[0],e),void n(s,e);const c=t.getLicenseDropDownElementIfPresent();c&&c.options&&(o(c,e),r(c,e),n(c.options,e))},getSelected:function(){const e=function(e){for(let t=0;t<e.length;t++){const n=e[t];if(n.checked||n.selected)return n.getAttribute("value")}return null},n=t.getLicenseRadioElementsIfPresent();if(n&&n.length>0){const t=e(n);if(t)return t}const o=t.getLicenseDropDownElementIfPresent();if(o&&o.options)return e(o.options)},bindEventListeners:function(e,t,n){this.apply((function(n){t&&n.addEventListener(e,t)}),(function(t){n&&t.addEventListener(e,n)}))},apply:function(e,n){const o=t.getLicenseRadioElementsIfPresent();if(e&&o&&o.length>0){for(let t=0;t<o.length;t++)e(o[t]);return}const r=t.getLicenseDropDownElementIfPresent();n&&r&&n(r)}}}function n(){const n=new e,o=new t,r=n.getServletContext(),s=n.getFormButton(),c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";e.style.cursor=t,e.disabled=!e.disabled,e.checked&&e.classList.toggle("input-checkbox--disabled")};function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";const t=n.getAllCrossSellCheckBoxes();if(t&&t.length>0)for(let n=0;n<t.length;n++)c(t[n],e);o.apply((function(t){c(t,e)}),(function(t){c(t,e)}))}const l=function(e,t){e.classList.toggle(t)};return{busy:!1,triggerUpdate:function(e,t,n,o,r){const s=this;this.busy||(s.disableControls(e,t),o&&o(),this.sendFormAsync(n,e,t,(function(){s.enableControls(e,t)})),r&&r())},disableControls:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.busy=!0,i("progress"),c(s,"not-allowed"),l(s,"button--disabled"),t&&c(t,"progress"),c(document.body,"progress"),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".calculated";if(!document.querySelector(e))return;const t=document.querySelector(".calculated-loading"),n=document.querySelector(".calculated-result");"none"===t.style.display||""===t.style.display||void 0===t.style.display?(n.style.display="none",t.style.display="block"):(t.style.display="none",n.style.display="block")}("#product-total-price.calculated")},enableControls:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;c(document.body),t&&c(t,"pointer"),l(s,"button--disabled"),c(s),i(),this.busy=!1},sendFormAsync:function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.sendFormDataAsync(new FormData(e),t,n,o)},sendFormDataAsync:function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;fetch(r+"/price-update",{method:"POST",body:e}).then((function(e){if(200===e.status)return e.json();const t=e.headers.get("Location")||r+"/error";throw window.location.href=t,new Error('Redirected to "'+t+'" after /price-update due to response status: '+e.status)})).then((function(e){const t=document.querySelector("div#vat-info");e&&t&&(t.innerHTML=e.fragment),o&&o()})).catch((function(e){window.Sentry&&window.Sentry.captureException(e)}))}}}function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},o.apply(null,arguments)}function r(){const t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:new n)||new n,r=new e,s=function(e,t){const n=document.createEvent("HTMLEvents");n.initEvent(t,!1,!0),e.dispatchEvent(n)},c=function(e,t){const n=r.getCrossSellIdentifierFrom(t),o=r.getSelectedCrossSellsDiv();if(!e.checked||!r.getSelectedCrossSellsInputBy(n))if(e.checked){const e=function(e){const t=e.children,n=new Set;for(let e=0;e<t.length;e++){const o=t[e];o.hasAttribute("data-cross-sell-index")&&n.add(o.getAttribute("data-cross-sell-index").toString())}for(let e=0;e<1e3;e++)if(!n.has(e.toString()))return e;throw new Error("Unable to find available index for cross sell item!")},t=e(o),r=document.createElement("input");r.setAttribute("id","selectedCrossSells"+t),r.setAttribute("type","hidden"),r.setAttribute("data-cross-sell-index",t.toString()),r.setAttribute("data-cross-sell-name",n),r.setAttribute("name","selectedCrossSells["+t+"]"),r.setAttribute("value",n),o.appendChild(r)}else{const e=o.children;for(let t=0;t<e.length;t++){const o=e[t];o.hasAttribute("data-cross-sell-name")&&o.getAttribute("data-cross-sell-name")===n&&o.remove()}}};return{init:function(){!function(){const e=r.getAllCrossSellCheckBoxes();if(e)for(let n=0;n<=e.length;n++){const i=e[n];if(!i)continue;const l=r.getSectionParentOfCheckbox(i);o(l.style,{cursor:"pointer"}),l.addEventListener("click",(function(){t.busy||(i.checked=!i.checked,s(i,"change"))})),i.addEventListener("change",(function(e){if(t.busy)return;const n=e.target,o=r.findMatchingParent(n,"form");t.triggerUpdate(n,l,o,(function(){c(n,l)}),null)}))}}(),function(){const e=r.getSelectedCrossSellsDiv(),t=r.getAllCrossSellCheckBoxes();if(e&&!(e.children.length<=0)&&t)for(let e=0;e<=t.length;e++){const n=t[e];if(!n)return;const o=r.getSectionParentOfCheckbox(n),s=r.getCrossSellIdentifierFrom(o);r.getSelectedCrossSellsInputBy(s)&&(n.checked=!0)}}()}}}function s(){const o=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:new n)||new n,r=new e,s=new t,c=function(e){if(!e)return;const t=r.getSelectedProductLicenseInput();t?t.setAttribute("value",e):window.Sentry&&window.Sentry.captureException(new Error("Missing input field for selected product license!"))},i=function(e){return function(t){if(o.busy)return;const n=t.target,i=e(n),l=r.findMatchingParent(n,"form");o.triggerUpdate(n,null,l,(function(){c(i)}),(function(){s.setSelected(i)}))}};return{init:function(){s.bindEventListeners("change",i((function(e){return e.getAttribute("value")})),i((function(e){return e.selectedOptions[0].getAttribute("value")}))),function(){const e=r.getSelectedProductLicenseInput();if(!e)return void(window.Sentry&&window.Sentry.captureException(new Error("Missing input field for selected product license!")));const t=e.getAttribute("value");if(t)s.setSelected(t);else{const e=s.getSelected();c(e)}}()}}}document.addEventListener("DOMContentLoaded",(function(){const e=new n,t=new r(e),o=new s(e);t.init(),o.init(),function(){const e=window.location.pathname||"",t=window.document;if(-1!==e.indexOf("/bundle-")){(t.querySelectorAll(".cross-sell-item")||[]).forEach((e=>{e&&(e.style.pointerEvents="none",e.style.cursor="default")}));const e=t.querySelectorAll(".cross-sell-check + label")||[];for(let t=0;t<e.length;t++){if(!e[t])return;e[t].click(),e[t].style.visibility="hidden"}const n=t.createElement("span");n.classList.add("badge"),n.classList.add("badge--promotion"),n.innerText="BETTER â™¥ TOGETHER";const o=t.querySelector(".cross-sell-item h3.headline.headline--sub")||!1;o&&o.parentElement.prepend(n)}}()}));const c=document.getElementById("termsConditions"),i=document.getElementById("product-form-button"),l=document.getElementById("error-message");let u=!1;c.onchange=()=>{u=!u,u&&(l.classList.add("paragraph--hidden"),c.classList.remove("input-checkbox--error"))},i.onclick=e=>{u||(e.preventDefault(),e.stopPropagation(),l.classList.remove("paragraph--hidden"),c.classList.add("input-checkbox--error"))}})();