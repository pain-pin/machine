const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=[window.__aiAssistUrl("chat-Xr_lto3U.js"),window.__aiAssistUrl("ai-assist.css")])))=>i.map(i=>d[i]);
var p=Object.defineProperty;var b=(i,t,e)=>t in i?p(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var u=(i,t,e)=>b(i,typeof t!="symbol"?t+"":t,e);import{t as w,u as g,_ as l}from"./chat-Xr_lto3U.js";/* empty css            */import"./ai-assist.js";let d=document.querySelector('script[src*="ai-assist.js"]'),c=!1;d&&(c=d.src,c&&(c=c.replace("ai-assist.js","")));window.__aiAssistUrl=function(i){return c?c+i:i};const s={setItem(i,t){try{localStorage.setItem(i,JSON.stringify(t))}catch(e){console.error("Error setting string in local storage",e)}},getItem(i){try{const t=localStorage.getItem(i);return t?JSON.parse(t):null}catch(t){return console.error("Error getting item from local storage",t),null}},removeItem(i){try{localStorage.removeItem(i)}catch(t){console.error("Error removing item from local storage",t)}},clear(){try{localStorage.clear()}catch(i){console.error("Error clearing local storage",i)}}},m="ai-bubble--hidden";class f{constructor(t){u(this,"clickHandler",null);this.bubbleElement=document.createElement("a"),this.bubbleElement.id="ai-bubble",this.bubbleElement.className="exos ai-bubble tooltip",this.bubbleElement.setAttribute("data-tooltip",w.id("common-text.ai")),this.clickHandler=t;const e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("class","ai-bubble__icon"),e.setAttribute("viewBox","0 0 16 16");const r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("d","M14.92,1.09c-0.02,0-0.04,0-0.05,0H6.71c-0.65,0-1.18,0.52-1.18,1.17c0,0.01,0,0.01,0,0.02v2.13H9c1.37,0,2.06,0.63,2.06,1.59v2.28l3.34,2.54l-1-2.54h1.44c0.64,0,1.16-0.52,1.16-1.16V2.28C16.03,1.65,15.55,1.12,14.92,1.09z");const o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("d","M9.31,4.99L9.31,4.99L1.19,4.96C0.54,4.96,0.01,5.48,0,6.13c0,0.01,0,0.01,0,0.02v4.84c0,0.64,0.52,1.16,1.16,1.16H2.6l-1.22,2.76l3.59-2.76h4.37c0.64,0.01,1.15-0.5,1.16-1.14c0-0.01,0-0.01,0-0.02V6.15C10.5,5.51,9.97,4.99,9.31,4.99z M8.99,8.11C7.51,8.39,7.28,9.82,7.28,9.82c-0.02,0.11-0.05,0.17-0.1,0.17c-0.09,0-0.12-0.17-0.12-0.17c-0.37-1.5-1.69-1.71-1.69-1.71c-0.2-0.03-0.2-0.12-0.2-0.12s0-0.07,0.2-0.12c0,0,1.32-0.21,1.69-1.71c0,0,0.03-0.17,0.12-0.17c0.05,0,0.08,0.07,0.1,0.17c0,0,0.23,1.43,1.71,1.71c0.02,0.01,0.17,0.05,0.17,0.12C9.16,8.07,9,8.11,8.99,8.11z"),e.appendChild(r),e.appendChild(o),this.bubbleElement.addEventListener("click",a=>{a.preventDefault(),this.clickHandler&&typeof this.clickHandler=="function"&&this.clickHandler()}),this.bubbleElement.appendChild(e),document.body.appendChild(this.bubbleElement)}show(){this.bubbleElement.classList.remove(m)}hide(){var t,e;this.bubbleElement.classList.add(m),(e=(t=window.EXOS)==null?void 0:t.tooltip)!=null&&e.initialize&&window.EXOS.tooltip.initialize()}}class v{constructor(t,e){s.getItem("ai-token")!==t&&(s.clear(),s.setItem("ai-token",t)),this.bubble=new f(()=>{this.open()}),this.appInstance=null,this.router=null,this.chatContainer=null,this.isOpen()&&this.open()}isOpen(){return this.isParamTrue("assist")||!this.isSmall()&&s.getItem("ai-chat-open")||!1}isParamTrue(t){return new URL(window.location.href).searchParams.get(t)==="true"}isSmall(){return window.matchMedia("(max-width: 666px)").matches}async open(){if(this.bubble.hide(),await this.mount(),this.chatContainer){this.chatContainer.classList.remove("ai-chat--hidden"),s.getItem("ai-chat-wide")&&this.chatContainer.classList.add("ai-chat--wide");const e=s.getItem("ai-chat-state");if(e){const r=g();r.$state=e}}if(this.router){let t=s.getItem("ai-chat-view");const e=s.getItem("ai-chat-loading");t&&!e?this.router.push(t):e&&this.router.push("/reset")}s.setItem("ai-chat-open",!0)}async mount(){if(!this.appInstance){const{createApp:t}=await l(async()=>{const{createApp:a}=await import("./chat-Xr_lto3U.js").then(n=>n.v);return{createApp:a}},__vite__mapDeps([0,1]),import.meta.url),{createPinia:e}=await l(async()=>{const{createPinia:a}=await import("./chat-Xr_lto3U.js").then(n=>n.p);return{createPinia:a}},__vite__mapDeps([0,1]),import.meta.url),{default:r}=await l(async()=>{const{default:a}=await import("./chat-Xr_lto3U.js").then(n=>n.A);return{default:a}},__vite__mapDeps([0,1]),import.meta.url),{default:o}=await l(async()=>{const{default:a}=await import("./chat-Xr_lto3U.js").then(n=>n.r);return{default:a}},__vite__mapDeps([0,1]),import.meta.url);this.router=o,this.appInstance=t(r),this.appInstance.use(e()),this.appInstance.use(this.router)}this.appInstance._container||(this.chatContainer=document.createElement("div"),this.chatContainer.id="ai-chat-ui",this.chatContainer.className="exos ai-chat ai-chat--hidden",document.body.appendChild(this.chatContainer),this.appInstance.mount("#ai-chat-ui"))}}(function(){var n,h;if(window.name==="oao-pi-overlay"||window.name==="cp-chat"||((h=(n=document.body)==null?void 0:n.classList)==null?void 0:h.contains(".oao-navi-mobile-app")))return;const r=document.getElementById("ai-init");if(!r)throw new Error("Initialization container not found");const o=r.getAttribute("data-token"),a=r.getAttribute("data-visitId");o&&a&&new v(o,a)})();export{s as l};
